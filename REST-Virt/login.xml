<?xml version="1.0" encoding="UTF-8"?>
<con:restMockAction name="login" method="GET" resourcePath="/login" id="fbe6f30f-4f1a-42e2-ac58-fb8f3b03b37c" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="82d0d51b-1cc5-4a16-835e-f1da0547efbdfileName">login</con:setting>
    <con:setting id="fbe6f30f-4f1a-42e2-ac58-fb8f3b03b37cfileName">login</con:setting>
  </con:settings>
  <con:defaultResponse>Invalid Login Fault</con:defaultResponse>
  <con:dispatchStyle>PARAMETER</con:dispatchStyle>
  <con:dispatchConfig/>
  <con:dispatchPath>//def queryString = mockRequest.getRequest().getQueryString()
//
//String[] fields = queryString.split("&amp;");
//String[] kv;
//
//HashMap&lt;String, String> params = new HashMap&lt;String, String>()
//for (int i = 0; i &lt; fields.length; ++i){
//    kv = fields[i].split("=");
//    if (2 == kv.length)
//     params.put(kv[0], kv[1]); 
//}
//
//def username = params.get("username")
//def password = params.get("password")
//def sum = username + password
//
//// validate
////if( sum.length() > 25 || sum.length() &lt; 10 || !username.startsWith("Login") || !password.endsWith( "123" ))
//// return "Invalid Login Fault"
////
////if( context.hasProperty( sum ))
//// return "Already Logged In Fault"
//
//// seems ok
//def sessionid = String.valueOf( Math.random() ).substring( 2 )
//
//context.setProperty( sum, sessionid )
//context.setProperty( sessionid, sum )
//
//requestContext.sessionid = sessionid
//return "Ok Response"</con:dispatchPath>
  <con:dispatchXPath/>
  <con:parameterDispatcherRuleContainer>
    <con:ParameterDispatcherRule>
      <con:ruleName>Rule 1</con:ruleName>
      <con:parameterDispatcherCondition>
        <con:parameterType>QUERY</con:parameterType>
        <con:parameterOperationType>EXISTS</con:parameterOperationType>
        <con:parameterName>username</con:parameterName>
        <con:parameterValue/>
      </con:parameterDispatcherCondition>
      <con:parameterDispatcherCondition>
        <con:parameterType>QUERY</con:parameterType>
        <con:parameterOperationType>EXISTS</con:parameterOperationType>
        <con:parameterName>password</con:parameterName>
        <con:parameterValue/>
      </con:parameterDispatcherCondition>
      <con:responseName>OK Response</con:responseName>
    </con:ParameterDispatcherRule>
  </con:parameterDispatcherRuleContainer>
  <con:routeScript/>
  <con:response name="OK Response" id="6c56554e-bfa7-4238-a920-050e2aeb589a" httpResponseStatus="200" mediaType="application/json" dataSource="idGenerator">
    <con:settings/>
    <con:responseContent>{"sessionid": "${#MockResponse#sessionID}"}</con:responseContent>
  </con:response>
  <con:response name="Invalid Login Fault" id="faade756-14ea-4aa5-a028-95f252d569ba" httpResponseStatus="401" mediaType="application/json" dataSource="">
    <con:settings/>
    <con:responseContent>{"Invalid Login" : "The login credentials are invalid"}</con:responseContent>
  </con:response>
</con:restMockAction>
